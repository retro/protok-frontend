mutation RequestLoginCode($email: String!) {
  requestLoginCode(email: $email)
}

mutation LoginWithCode($email: String!, $code: String!) {
  loginWithCode(email: $email, code: $code) {
    account {
      ...accountData
    }
    token
  }
}

query CurrentAccount {
  currentAccount {
    ...accountData
  }
}

fragment accountData on Account {
  id
  username
  email
}


query OrganizationMemberships {
  currentAccount {
    organizationMemberships {
      memberRole
      organization {
        id
        name
      }
    }
  }
}

mutation CreateOrganization($input: CreateOrganizationInput!) {
  createOrganization(input:$input) {
   ...organizationData
  }
}

mutation UpdateOrganization($input: UpdateOrganizationInput!) {
  updateOrganization(input:$input) {
    ...organizationData
  }
}

query FetchOrganization($id: ID!) {
  fetchOrganization(id:$id) {
    ...organizationData
  }
}

fragment organizationData on Organization {
  id
  name
  membership {
    memberRole
  }
}

query FetchOrganizationProjects($id: ID!) {
  fetchOrganization(id: $id) {
    projects {
      ...projectData
    }
  }
}

query FetchProject($id:ID!) {
  fetchProject(id: $id) {
    ...projectData
  }
}

mutation CreateProject($input: CreateProjectInput!) {
  createProject(input:$input) {
   ...projectData
  }
}

mutation UpdateProject($input: UpdateProjectInput!) {
  updateProject(input:$input) {
    ...projectData
  }
}

fragment projectData on Project {
  id
  name
  organization {
    id
  }
}

query FetchProjectFlows($id:ID!) {
  fetchProject(id:$id) {
    flows {
      ...flowData
    }
  }
}

query FetchFlow($id:ID!) {
  fetchFlow(id: $id) {
    ...flowData
  }
}

mutation CreateFlow($input: CreateFlowInput!) {
  createFlow(input:$input) {
   ...flowData
  }
}

mutation UpdateFlow($input: UpdateFlowInput!) {
  updateFlow(input:$input) {
    ...flowData
  }
}

fragment flowData on Flow {
  id
  name
  project {
    id
  }
}

